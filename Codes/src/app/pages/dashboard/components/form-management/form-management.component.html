<div class="form-management-container">
  <div class="header-section">
    <h1>{{ "FORM_MANAGEMENT.TITLE" | translate }}</h1>
  </div>

  <app-form-management-topbar
    [projects]="projects"
    [locations]="locations"
    (projectSelected)="onProjectSelected($event)"
    (refetch)="refetchForms()"
  ></app-form-management-topbar>

  <div class="content-section">
    <!-- show error -->
    <div *ngIf="error" class="error" role="alert">
      {{ "FORM_MANAGEMENT.ERROR_LOADING_FORMS" | translate }}
    </div>

    <!-- show skeleton placeholders when loading -->
    <div *ngIf="isLoading" class="card-list-skeleton">
      <div class="loading-message">
        <p>{{ "FORM_MANAGEMENT.LOADING_FORMS" | translate }}</p>
      </div>
      <app-form-list-skeleton></app-form-list-skeleton>
    </div>

    <!-- show empty state if finished and no forms -->
    <div
      *ngIf="!isLoading && isFinished && forms && forms.length === 0"
      class="empty-state"
    >
      {{ "FORM_MANAGEMENT.NO_FORMS_FOUND" | translate }}
    </div>

    <!-- show real list when loaded -->
    <div *ngIf="!isLoading && forms && forms.length > 0">
      <app-card-list
        [items]="forms"
        [cardComponent]="formCardComponent"
        (cardEvent)="onCardEvent($event)"
      ></app-card-list>
    </div>

    <!-- Legacy project info section - can be removed if not needed -->
    <div class="info-section" *ngIf="selectedProjectId && !isFinished">
      <h3>{{ "FORM_MANAGEMENT.SELECTED_PROJECT" | translate }}</h3>
      <p>
        <strong>{{ "FORM_MANAGEMENT.PROJECT_ID" | translate }}:</strong>
        {{ selectedProjectId }}
      </p>
      <p>
        <strong>{{ "FORM_MANAGEMENT.PROJECT_NAME" | translate }}:</strong>
        {{ getProjectName(selectedProjectId) }}
      </p>
    </div>
  </div>
</div>
