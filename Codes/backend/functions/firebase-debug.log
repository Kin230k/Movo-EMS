[debug] [2025-07-31T18:47:27.950Z] ----------------------------------------------------------------------
[debug] [2025-07-31T18:47:27.954Z] Command:       C:\nvm4w\nodejs\node.exe C:\Users\alsar\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js emulators:start --only functions,auth
[debug] [2025-07-31T18:47:27.955Z] CLI Version:   14.11.0
[debug] [2025-07-31T18:47:27.955Z] Platform:      win32
[debug] [2025-07-31T18:47:27.955Z] Node Version:  v20.18.0
[debug] [2025-07-31T18:47:27.955Z] Time:          Thu Jul 31 2025 21:47:27 GMT+0300 (GMT+03:00)
[debug] [2025-07-31T18:47:27.955Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-07-31T18:47:27.958Z] >>> [apiv2][query] GET https://firebase-public.firebaseio.com/cli.json [none]
[debug] [2025-07-31T18:47:28.310Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] Failed to authenticate, have you run firebase login?
[warn] !  emulators: You are not currently authenticated so some features may not work correctly. Please run firebase login to authenticate the CLI. 
[info] i  emulators: Starting emulators: auth, functions {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: auth, functions"}}
[debug] [2025-07-31T18:47:28.362Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-07-31T18:47:28.362Z] [auth] Authentication Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-07-31T18:47:28.362Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"auth":[{"address":"127.0.0.1","family":"IPv4","port":9099}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2025-07-31T18:47:28.368Z] [hub] writing locator at C:\Users\alsar\AppData\Local\Temp\hub-local.json
[debug] [2025-07-31T18:47:28.395Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-07-31T18:47:28.396Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-07-31T18:47:28.396Z] [tasks] Cloud Tasks Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-07-31T18:47:28.396Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"auth":[{"address":"127.0.0.1","family":"IPv4","port":9099}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5001}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}],"tasks":[{"address":"127.0.0.1","family":"IPv4","port":9499}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[warn] !  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: apphosting, firestore, database, hosting, pubsub, storage, dataconnect {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mapphosting, firestore, database, hosting, pubsub, storage, dataconnect\u001b[22m"}}
[debug] [2025-07-31T18:47:28.399Z] No OAuth tokens found
[debug] [2025-07-31T18:47:28.400Z] No OAuth tokens found
[debug] [2025-07-31T18:47:28.400Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-07-31T18:47:28.400Z] Failed to get Admin SDK config for local, falling back to cache Failed to get Admin SDK for Firebase project local. Please make sure the project exists and your account has permission to access it. {"name":"FirebaseError","children":[],"exit":2,"message":"Failed to get Admin SDK for Firebase project local. Please make sure the project exists and your account has permission to access it.","original":{"name":"FirebaseError","children":[],"exit":1,"message":"Failed to authenticate, have you run \u001b[1mfirebase login\u001b[22m?","original":{},"status":500},"status":500}
[warn] !  functions: Unable to fetch project Admin SDK configuration, Admin SDK behavior in Cloud Functions emulator may be incorrect. {"metadata":{"emulator":{"name":"functions"},"message":"Unable to fetch project Admin SDK configuration, Admin SDK behavior in Cloud Functions emulator may be incorrect."}}
[info] i  functions: Watching "C:\projects\MOVO\Movo-EMS\Codes\backend\functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"C:\\projects\\MOVO\\Movo-EMS\\Codes\\backend\\functions\" for Cloud Functions..."}}
[debug] [2025-07-31T18:47:35.325Z] Validating nodejs source
[debug] [2025-07-31T18:47:42.314Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "build": "tsc",
    "serve": "npm run build && cross-env FUNCTIONS_EMULATOR=true firebase emulators:start --only functions,auth",
    "shell": "npm run build && npx firebase functions:shell",
    "start": "npm run shell",
    "test": "jest",
    "deploy": "npx firebase deploy --only functions",
    "logs": "npx firebase functions:log"
  },
  "engines": {
    "node": "20"
  },
  "main": "lib/index.js",
  "dependencies": {
    "dotenv": "^17.2.0",
    "firebase-admin": "^13.4.0",
    "firebase-functions": "^6.4.0",
    "nodemailer": "^7.0.5",
    "pg": "^8.16.3"
  },
  "devDependencies": {
    "@types/jest": "^30.0.0",
    "@types/node": "^20.14.1",
    "@types/nodemailer": "^6.4.17",
    "@types/pg": "^8.15.5",
    "cross-env": "^10.0.0",
    "jest": "^30.0.5",
    "ts-jest": "^29.4.0",
    "ts-node": "^10.9.2",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2025-07-31T18:47:42.314Z] Building nodejs source
[debug] [2025-07-31T18:47:42.314Z] Failed to find version of module node: reached end of search path C:\projects\MOVO\Movo-EMS\Codes\backend\functions\node_modules
[info] +  functions: Using node@20 from host. 
[info] i  functions: Loaded environment variables from .env. 
[debug] [2025-07-31T18:47:42.319Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-07-31T18:47:42.324Z] Found firebase-functions binary at 'C:\projects\MOVO\Movo-EMS\Codes\backend\functions\node_modules\.bin\firebase-functions'
[debug] [2025-07-31T18:47:42.941Z] <<< [apiv2][status] GET https://firebase-public.firebaseio.com/cli.json 200
[debug] [2025-07-31T18:47:42.941Z] <<< [apiv2][body] GET https://firebase-public.firebaseio.com/cli.json {"cloudBuildErrorAfter":1594252800000,"cloudBuildWarnAfter":1590019200000,"defaultNode10After":1594252800000,"minVersion":"3.0.5","node8DeploysDisabledAfter":1613390400000,"node8RuntimeDisabledAfter":1615809600000,"node8WarnAfter":1600128000000}
[info] Serving at port 8145

[info] 🔥 Firebase Admin using AUTH emulator

[info] [dotenv@17.2.0] injecting env (12) from .env (tip: ⚙️  override existing env vars with { override: true })

[info] [dotenv@17.2.0] injecting env (0) from .env (tip: 🔐 encrypt with dotenvx: https://dotenvx.com)

[debug] [2025-07-31T18:47:44.805Z] Got response from /__/functions.yaml {"endpoints":{"sendPasswordReset":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":10,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"sendPasswordReset"},"sendLoginAlert":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":10,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"sendLoginAlert"},"registerUser":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":10,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"registerUser"},"changeUserEmail":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":10,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"changeUserEmail"},"checkServiceStatus":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":10,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"callableTrigger":{},"entryPoint":"checkServiceStatus"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] +  functions: Loaded functions definitions from source: sendPasswordReset, sendLoginAlert, registerUser, changeUserEmail, checkServiceStatus. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: sendPasswordReset, sendLoginAlert, registerUser, changeUserEmail, checkServiceStatus."}}
[info] +  functions[us-central1-sendPasswordReset]: http function initialized (http://127.0.0.1:5001/local/us-central1/sendPasswordReset). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/local/us-central1/sendPasswordReset)."}}
[info] +  functions[us-central1-sendLoginAlert]: http function initialized (http://127.0.0.1:5001/local/us-central1/sendLoginAlert). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/local/us-central1/sendLoginAlert)."}}
[info] +  functions[us-central1-registerUser]: http function initialized (http://127.0.0.1:5001/local/us-central1/registerUser). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/local/us-central1/registerUser)."}}
[info] +  functions[us-central1-changeUserEmail]: http function initialized (http://127.0.0.1:5001/local/us-central1/changeUserEmail). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/local/us-central1/changeUserEmail)."}}
[info] +  functions[us-central1-checkServiceStatus]: http function initialized (http://127.0.0.1:5001/local/us-central1/checkServiceStatus). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/local/us-central1/checkServiceStatus)."}}
[debug] [2025-07-31T18:47:48.852Z] Could not find VSCode notification endpoint: FetchError: request to http://localhost:40001/vscode/notify failed, reason: . If you are not running the Firebase Data Connect VSCode extension, this is expected and not an issue.
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4000/               │
└─────────────────────────────────────────────────────────────┘

┌────────────────┬────────────────┬─────────────────────────────────┐
│ Emulator       │ Host:Port      │ View in Emulator UI             │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Authentication │ 127.0.0.1:9099 │ http://127.0.0.1:4000/auth      │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Functions      │ 127.0.0.1:5001 │ http://127.0.0.1:4000/functions │
└────────────────┴────────────────┴─────────────────────────────────┘
  Emulator Hub host: 127.0.0.1 port: 4400
  Other reserved ports: 4500

Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
